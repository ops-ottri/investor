<!DOCTYPE html>
<html>
<head>
  <title>Ottri Investor Update</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- ðŸ”¹ Custom Font -->
  <style>
  @font-face {
    font-family: "L7Stencil";
    src: url("L-7%20Stencil.ttf") format("truetype");
    font-display: swap;
  }

  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
  body { font-family: 'Inter', sans-serif; background-color: #030014; color: #FFFFFF; }
  .section-eyebrow { color: #9378ff; font-weight: 600; letter-spacing: 0.1em; text-transform: uppercase; }

  body::before {
    content: '';
    position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    background: radial-gradient(circle at top, rgba(76, 36, 159, 0.3) 0%, rgba(76, 36, 159, 0) 40%);
    z-index: -1; pointer-events: none;
  }

  .loader { border: 4px solid rgba(255,255,255,0.2); border-top: 4px solid #9378ff; border-radius: 50%;
    width: 40px; height: 40px; animation: spin 1s linear infinite; }
  @keyframes spin { 0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);} }

  .title-gradient {
    background: linear-gradient(90deg, #F97316, #D946EF, #8B5CF6);
    -webkit-background-clip: text; background-clip: text; color: transparent;
  }

  .section-separator { position: relative; }
  .section-separator::before {
    content: ''; position: absolute; top: 0; left: 50%; transform: translateX(-50%);
    width: 90%; max-width: 1280px; border-top: 1px solid rgba(255,255,255,0.1);
  }

  @keyframes pulse { 0%,100%{opacity:1;transform:scale(1);} 50%{opacity:.7;transform:scale(1.1);} }

  @media (max-width: 768px) {
    .section-header-mobile { cursor: pointer; }
    .section-content { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-out; }
    .section-content.expanded { max-height: 5000px; transition: max-height 0.7s ease-in; }
    .chevron-indicator { transition: transform 0.3s ease; animation: pulse 2.5s infinite cubic-bezier(0.4,0,0.6,1); }
    .section-header-mobile.expanded .chevron-indicator { transform: rotate(180deg); animation: none; }
  }

  /* ðŸ”¹ Apply custom font to first letter of hero + section titles */
  .hero-title::first-letter,
  .section-title::first-letter {
    font-family: "L7Stencil", sans-serif;
    font-size: 1.5em;
    line-height: 0.9;
    letter-spacing: 0.03em;
    display: inline-block;
  }

  @media print { body { display: none !important; } }
  </style>
</head>
<body class="antialiased" style="overflow: hidden;">

  <!-- Password Modal -->
  <div id="password-modal" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4">
    <div class="bg-[#110d24] border border-white/10 rounded-2xl p-8 max-w-sm w-full text-center shadow-2xl">
      <h2 class="text-2xl font-bold text-white">Access Required</h2>
      <p class="mt-2 text-gray-400">Please enter the password to view this update.</p>
      <input type="password" id="password-input" class="mt-6 w-full bg-gray-900/50 border border-white/20 rounded-lg p-3 text-white text-center focus:ring-2 focus:ring-[#9378ff] focus:outline-none" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
      <p id="password-error" class="text-red-400 text-sm mt-2 h-5"></p>
      <button id="unlock-button" class="mt-4 w-full bg-[#9378ff] hover:bg-[#8162ff] text-white font-bold py-3 px-4 rounded-lg transition-all duration-200 flex items-center justify-center">
        <span id="unlock-text">Unlock</span>
        <div id="unlock-spinner" class="loader w-6 h-6 border-2 hidden"></div>
      </button>
    </div>
  </div>
  
  <header id="header-container" class="hidden"></header>
  <main id="content-container" class="hidden"></main>
  <footer id="footer-container" class="hidden"></footer>

<script>
/* ============ CONFIG ============ */
const SHEET_ID = "1sJQIQuUWe0sOrytSmJj0siTsuAR5ZNL2MEpcZsyBYUc";
const TAB_ORDER = ["title","intro","team","momentum","product","roadmap","market","partners","vision","footer"];
const TITLE_TABS = ["title","hero","header"];
const FOOTER_TABS = ["footer","foot","end"];
const PASSWORD_SHA256 = "903c8a8eb1cc4a21747ceb0d3ddb3419d6b94dd8d37cf64ffb37ce00f69cfff8"; // "iloveottri"

/* ============ HELPERS ============ */
function applyGradient(t){return(!t||typeof t!=="string")?"":t.replace(/\*(.*?)\*/g,'<span class="title-gradient">$1</span>');}
function setupAccordion(){if(window.innerWidth>768)return;
  document.body.addEventListener("click",e=>{
    const h=e.target.closest(".section-header-mobile");if(!h)return;
    const c=h.nextElementSibling;if(!c||!c.classList.contains("section-content"))return;
    const exp=h.classList.contains("expanded");
    document.querySelectorAll(".section-header-mobile.expanded").forEach(x=>{
      if(x!==h){x.classList.remove("expanded");x.nextElementSibling?.classList.remove("expanded");}});
    if(exp){h.classList.remove("expanded");c.classList.remove("expanded");}
    else{h.classList.add("expanded");c.classList.add("expanded");}
  });
}

/* ============ FETCH SHEETS ============ */
function gvizUrl(n){return`https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${encodeURIComponent(n)}&tq=${encodeURIComponent("select *")}`;}
function parseGViz(t){const s=t.indexOf("{"),e=t.lastIndexOf("}");if(s<0||e<0)return[];const j=JSON.parse(t.slice(s,e+1));return(j.table?.rows||[]).map(r=>(r.c||[]).map(c=>c?c.v:null));}
async function fetchTab(n){const r=await fetch(gvizUrl(n),{cache:"no-store"});const t=await r.text();return parseGViz(t);}
async function loadFromSheets(){const names=TAB_ORDER.map(n=>n.toLowerCase()),res={};await Promise.all(names.map(async n=>res[n]=await fetchTab(n)));const title=names.find(n=>TITLE_TABS.includes(n))||names[0];const foot=names.find(n=>FOOTER_TABS.includes(n))||names.at(-1);return{titleData:{name:title,data:res[title]},contentData:names.filter(n=>n!==title&&n!==foot).map(n=>({name:n,data:res[n]})),footerData:{name:foot,data:res[foot]}};}

/* ============ RENDERERS ============ */
function renderHeroSection(s){const d=s.data||[];if(d.length<2)return"";const c=d[1],title=String(c[0]||""),sub=String(c[1]||""),logo=String(c[2]||"");let h='<div class="text-center py-16 sm:py-20 px-6 lg:px-8">';if(logo)h+=`<img class="max-h-48 w-auto mx-auto mb-8" src="${logo}" alt="Ottri Logo">`;if(title)h+=`<h1 class="hero-title text-4xl font-bold tracking-tight sm:text-6xl leading-snug sm:leading-snug">${applyGradient(title)}</h1>`;if(sub)h+=`<p class="mt-4 text-lg leading-8 text-gray-300">${applyGradient(sub)}</p>`;h+="</div>";return h;}
function renderStandardSection(s){const d=s.data||[];if(d.length<2)return"";const hrow=d[1],eyeb=String(hrow[0]||""),title=String(hrow[1]||""),desc=String(hrow[7]||""),p=d.slice(1).map(r=>r[2]).filter(Boolean);let html='<div class="max-w-4xl mx-auto text-center py-16 sm:py-24 px-6 lg:px-8"><div class="section-header-mobile">';if(eyeb)html+=`<p class="section-eyebrow mb-4">${applyGradient(eyeb)}</p>`;if(title)html+=`<h2 class="section-title text-4xl md:text-5xl font-extrabold tracking-tight">${applyGradient(title)}</h2>`;if(desc)html+=`<p class="mt-4 max-w-3xl mx-auto text-lg text-gray-300">${applyGradient(desc)}</p>`;html+='<div class="md:hidden flex justify-center mt-6"><svg class="chevron-indicator w-6 h-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg></div></div><div class="section-content">';p.forEach(x=>html+=`<p class="mt-6 max-w-2xl mx-auto text-lg text-gray-300 text-center">${applyGradient(x)}</p>`);return html+"</div></div>";}
function renderPage(r){const main=document.getElementById("content-container"),head=document.getElementById("header-container"),foot=document.getElementById("footer-container");if(r.titleData)head.innerHTML=renderHeroSection(r.titleData);main.innerHTML="";r.contentData.forEach(s=>main.innerHTML+=renderStandardSection(s));head.classList.remove("hidden");main.classList.remove("hidden");foot.classList.remove("hidden");setupAccordion();}

/* ============ PASSWORD GATE ============ */
async function sha256Hex(s){const e=new TextEncoder().encode(s);const b=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(b)).map(x=>x.toString(16).padStart(2,"0")).join("");}
async function unlock(){const pw=document.getElementById("password-input").value.trim(),err=document.getElementById("password-error"),btn=document.getElementById("unlock-button"),txt=document.getElementById("unlock-text"),spin=document.getElementById("unlock-spinner");if(!pw){err.textContent="Please enter a password.";return;}err.textContent="";txt.classList.add("hidden");spin.classList.remove("hidden");btn.disabled=true;try{const h=await sha256Hex(pw);if(h!==PASSWORD_SHA256.toLowerCase()){err.textContent="Invalid password.";return;}document.getElementById("password-modal").style.display="none";document.body.style.overflow="auto";const d=await loadFromSheets();renderPage(d);}finally{txt.classList.remove("hidden");spin.classList.add("hidden");btn.disabled=false;}}
document.getElementById("unlock-button").addEventListener("click",unlock);
document.getElementById("password-input").addEventListener("keypress",e=>{if(e.key==="Enter")unlock();});
</script>
</body>
</html>
